<behaviortree name="SpiderMindPre" precondition="" repeatuntil="" debug="False"><sequencer name="root" precondition="" repeatuntil="" debug="False"><parallel name="living loop" precondition="is_dead == false" repeatuntil="" debug="True" fail="any" succeed="all" tiebreaker="fail"><selector name="assign emotional state" precondition="" repeatuntil="running" debug="True"><assign name="set as dying" precondition="current_health &lt;= 0" repeatuntil="" debug="True" expression="emotional_state = &quot;dying&quot;" /><sequencer name="if player is in attack distance, set as aggressive" precondition="" repeatuntil="" debug="True"><action name="player is in attack distance" precondition="" repeatuntil="" debug="True" classname="PlayerIsInAttackDistance" /><assign name="set as aggressive" precondition="" repeatuntil="" debug="True" expression="emotional_state = &quot;aggressive&quot;" /></sequencer><assign name="set as calm" precondition="" repeatuntil="" debug="True" expression="emotional_state = &quot;calm&quot;" /></selector><sequencer name="act based on emotional state" precondition="" repeatuntil="running" debug="True"><selector name="choose action" precondition="" repeatuntil="" debug="True"><sequencer name="is dying" precondition="emotional_state == &quot;dying&quot;" repeatuntil="" debug="True"><animate name="play death animation" precondition="" repeatuntil="" debug="True" animation="Die" waitforsec="2" layer="0" wrapmode="default" fadein="0" fadeout="0" /><assign name="set as dead" precondition="" repeatuntil="" debug="True" expression="is_dead = true" /></sequencer><sequencer name="is scared" precondition="emotional_state == &quot;scared&quot;" repeatuntil="" debug="True"><action name="choose random hiding spot" precondition="" repeatuntil="" debug="True" classname="FindRandomHidingSpot" /><move name="move to random hiding spot" precondition="" repeatuntil="" debug="True" movetarget="move_target" movespeed="-1" animation="Walk" animationlayer="0" animationwrapmode="default" animationbasespeed="1" /></sequencer><sequencer name="is aggressive" precondition="emotional_state == &quot;aggressive&quot;" repeatuntil="" debug="True"><timer name="wait" precondition="" debug="True" waitforsec="1" /><action name="attack the player" precondition="" repeatuntil="" debug="True" classname="AttackPlayer" /></sequencer><sequencer name="is calm" precondition="emotional_state == &quot;calm&quot;" repeatuntil="" debug="True"><action name="set position behind player" precondition="" repeatuntil="" debug="True" classname="SetPositionBehindPlayer" /><selector name="try to move behind player" precondition="" repeatuntil="" debug="True"><move name="move to player" precondition="" repeatuntil="" debug="True" movetarget="move_target" movespeed="-1" animation="Run" animationlayer="0" animationwrapmode="loop" animationbasespeed="1" /><assign name="change emotional_state to scared" precondition="" repeatuntil="" debug="True" expression="emotional_state = &quot;scared&quot;" /></selector></sequencer></selector></sequencer></parallel></sequencer></behaviortree>