<behaviortree name="SpiderMind" precondition="" repeatuntil="" debug="False"><sequencer name="root" precondition="" repeatuntil="" debug="False"><sequencer name="main loop" precondition="" repeatuntil="" debug="False"><condition name="confirm not dead" precondition="" repeatuntil="" debug="False" expression="is_dead == false" /><parallel name="living behavior" precondition="" repeatuntil="" debug="False" fail="any" succeed="all" tiebreaker="fail"><sequencer name="set object states" precondition="" repeatuntil="failure" debug="False"><condition name="confirm not dead" precondition="" repeatuntil="" debug="False" expression="is_dead == false" /></sequencer><sequencer name="change emotional state" precondition="" repeatuntil="failure" debug="False"><condition name="confirm not dead" precondition="" repeatuntil="" debug="False" expression="is_dead == false" /><selector name="choose emotional state" precondition="" repeatuntil="" debug="True"><sequencer name="change to dying" precondition="" repeatuntil="" debug="True"><condition name="AI has health" precondition="" repeatuntil="" debug="True" expression="current_health &lt;= 0" /><assign name="set move target as null" precondition="" repeatuntil="" debug="True" expression="move_target = null" /><assign name="set emotional state as dying" precondition="" repeatuntil="" debug="True" expression="emotional_state = &quot;dying&quot;" /></sequencer><sequencer name="change to aggressive" precondition="" repeatuntil="" debug="True"><action name="player is in attack distance" precondition="" repeatuntil="" debug="True" classname="PlayerIsInAttackDistance" /><assign name="set move_target as null" precondition="" repeatuntil="" debug="True" expression="move_target = null" /><assign name="set emotional state as aggresive" precondition="" repeatuntil="" debug="True" expression="emotional_state = &quot;aggressive&quot;" /></sequencer><sequencer name="change to calm" precondition="" repeatuntil="" debug="False"><assign name="set the emotional state as calm" precondition="" repeatuntil="" debug="False" expression="emotional_state = &quot;calm&quot;" /></sequencer></selector></sequencer><sequencer name="execute behavior based on emotional state" precondition="" repeatuntil="failure" debug="False"><condition name="confirm not dead" precondition="" repeatuntil="" debug="False" expression="is_dead == false" /><selector name="choose behavior based on emotional state" precondition="" repeatuntil="" debug="False"><sequencer name="dying behavoir" precondition="" repeatuntil="" debug="False"><condition name="confirm dying" precondition="" repeatuntil="" debug="False" expression="emotional_state == &quot;dying&quot;" /><sequencer name="die" precondition="" repeatuntil="" debug="False"><animate name="play death animation" precondition="" repeatuntil="" debug="False" animation="Die" waitforsec="2" layer="0" wrapmode="default" fadein="0" fadeout="0" /><assign name="set dead" precondition="" repeatuntil="" debug="False" expression="is_dead = true" /></sequencer></sequencer><sequencer name="scared behavior" precondition="" repeatuntil="" debug="False"><condition name="confirm scared" precondition="" repeatuntil="" debug="False" expression="emotional_state == &quot;scared&quot;" /><sequencer name="move to random hiding spot" precondition="" repeatuntil="" debug="False"><action name="find random hiding spot" precondition="" repeatuntil="" debug="False" classname="FindRandomHidingSpot" /><move name="move to hiding spot" precondition="" repeatuntil="" debug="False" movetarget="move_target" movespeed="-1" animation="Walk" animationlayer="0" animationwrapmode="default" animationbasespeed="1" /></sequencer></sequencer><sequencer name="aggressive behavior" precondition="" repeatuntil="" debug="False"><condition name="confirm aggressive" precondition="" repeatuntil="" debug="False" expression="emotional_state == &quot;aggressive&quot;" /><timer name="timer 26057" precondition="" debug="False" waitforsec="1" /><action name="attack player" precondition="" repeatuntil="" debug="False" classname="AttackPlayer" /></sequencer><sequencer name="calm behavior" precondition="" repeatuntil="" debug="False"><condition name="confirm calm" precondition="" repeatuntil="" debug="False" expression="emotional_state == &quot;calm&quot;" /><action name="set position behind player" precondition="" repeatuntil="" debug="False" classname="SetPositionBehindPlayer" /><selector name="try to move behind the player" precondition="" repeatuntil="" debug="False"><move name="move behind player" precondition="" repeatuntil="" debug="False" movetarget="move_target" movespeed="-1" animation="Run" animationlayer="0" animationwrapmode="loop" animationbasespeed="1" /><assign name="assign 13040" precondition="" repeatuntil="" debug="False" expression="move_target = null" /><assign name="if the AI can't move behind the player, return to scared mode and hide out" precondition="" repeatuntil="" debug="False" expression="emotional_state = &quot;scared&quot;" /></selector></sequencer></selector></sequencer></parallel></sequencer></sequencer></behaviortree>