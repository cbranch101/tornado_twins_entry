<behaviortree name="SpiderMind" precondition="" repeatuntil="" debug="False"><sequencer name="root" precondition="" repeatuntil="" debug="False"><parallel name="living loop" precondition="is_dead == false" repeatuntil="" debug="True" fail="any" succeed="all" tiebreaker="fail"><selector name="change emotional state" precondition="" repeatuntil="running" debug="True"><assign name="change to dying" precondition="current_health &lt;= 0" repeatuntil="" debug="True" expression="emotional_state = &quot;dying&quot;" /><sequencer name="change to hungry" precondition="" repeatuntil="" debug="True"><selector name="check if we're in hungry mode" precondition="" repeatuntil="" debug="True"><assign name="a rat isn't being eaten right now" precondition="" repeatuntil="" debug="True" expression="rat_to_eat != null" /><sequencer name="find and choose dead rats" precondition="" repeatuntil="" debug="True"><action name="find any dead rats" precondition="" repeatuntil="" debug="True" classname="SetDeadRats" /><action name="choose dead rat to attack" precondition="" repeatuntil="" debug="True" classname="SelectRandomDeadRat" /></sequencer></selector><assign name="set as hungry" precondition="" repeatuntil="" debug="True" expression="emotional_state = &quot;hungry&quot;" /></sequencer><sequencer name="change to scared" precondition="emotional_state != &quot;hungry&quot;" repeatuntil="" debug="True"><action name="player is aiming at AI with weapon" precondition="" repeatuntil="" debug="True" classname="PlayerIsAimingAtAIWithWeapon" /><assign name="set as scared" precondition="" repeatuntil="" debug="True" expression="emotional_state = &quot;scared&quot;" /></sequencer><sequencer name="change to aggressive" precondition="" repeatuntil="" debug="True"><action name="play is in attack distance" precondition="" repeatuntil="" debug="True" classname="PlayerIsInAttackDistance" /><assign name="set as aggressive" precondition="" repeatuntil="" debug="True" expression="emotional_state = &quot;aggressive&quot;" /></sequencer><assign name="change to calm" precondition="" repeatuntil="" debug="True" expression="emotional_state = &quot;calm&quot;" /></selector><sequencer name="act based on emotional state" precondition="" repeatuntil="running" debug="True"><selector name="choose behavior" precondition="" repeatuntil="" debug="True"><sequencer name="dying behavior" precondition="emotional_state == &quot;dying&quot;" repeatuntil="" debug="True"><animate name="play death animation" precondition="" repeatuntil="" debug="True" animation="Die" waitforsec="2" layer="0" wrapmode="default" fadein="0" fadeout="0" /><assign name="change to dead" precondition="" repeatuntil="" debug="True" expression="is_dead = true" /></sequencer><sequencer name="hungry behavior" precondition="emotional_state == &quot;hungry&quot;" repeatuntil="" debug="True"><move name="Move to dead rat" precondition="" repeatuntil="" debug="True" movetarget="rat_to_eat" movespeed="-1" animation="" animationlayer="0" animationwrapmode="default" animationbasespeed="1" /><animate name="eat rat" precondition="" repeatuntil="" debug="True" animation="Eating" waitforsec="2" layer="0" wrapmode="default" fadein="0" fadeout="0" /><action name="destroy rat" precondition="" repeatuntil="" debug="True" classname="DestroyDeadRat" /><assign name="set the rat_to_eat as null" precondition="" repeatuntil="" debug="False" expression="rat_to_eat = null" /><assign name="change to calm" precondition="" repeatuntil="" debug="False" expression="emotional_state = &quot;calm&quot;" /></sequencer><sequencer name="scared behavior" precondition="emotional_state == &quot;scared&quot;" repeatuntil="" debug="True"><action name="find random hiding spot" precondition="" repeatuntil="" debug="True" classname="FindRandomHidingSpot" /><move name="move to random hiding spot" precondition="" repeatuntil="" debug="True" movetarget="move_target" movespeed="5" animation="Walk" animationlayer="0" animationwrapmode="loop" animationbasespeed="5" /><assign name="change to calm" precondition="" repeatuntil="" debug="True" expression="emotional_state == &quot;calm&quot;" /></sequencer><sequencer name="aggressive behavior" precondition="emotional_state == &quot;aggressive&quot;" repeatuntil="" debug="True"><timer name="wait 1 second" precondition="" debug="True" waitforsec="1" /><action name="attack player" precondition="" repeatuntil="" debug="True" classname="AttackPlayer" /></sequencer><sequencer name="calm behavior" precondition="emotional_state == &quot;calm&quot;" repeatuntil="" debug="True"><selector name="try to set position behind player or change to scared if that's not possible" precondition="" repeatuntil="" debug="True"><action name="set position behind player" precondition="" repeatuntil="" debug="True" classname="SetPositionBehindPlayer" /><assign name="set as scared" precondition="" repeatuntil="" debug="True" expression="emotional_state == &quot;scared&quot;" /></selector><move name="move behind player" precondition="" repeatuntil="" debug="True" movetarget="move_target" movespeed="-1" animation="Run" animationlayer="0" animationwrapmode="loop" animationbasespeed="1" /></sequencer></selector></sequencer></parallel></sequencer></behaviortree>