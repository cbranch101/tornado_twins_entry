<behaviortree name="SmallEnemyMind" precondition="" repeatuntil="" debug="False"><sequencer name="root" precondition="" repeatuntil="" debug="False"><sequencer name="avoid aggressive player" precondition="" repeatuntil="" debug="False"><action name="check if the player has a gun and is pointing at the AI" precondition="" repeatuntil="" debug="False" classname="PlayerIsAimingAtAIWithWeapon" /></sequencer><sequencer name="main loop" precondition="" repeatuntil="" debug="False"><condition name="if ai is dead, stop here" precondition="" repeatuntil="" debug="False" expression="is_dead == false" /><parallel name="Living state" precondition="" repeatuntil="" debug="False" fail="any" succeed="all" tiebreaker="fail"><sequencer name="Check object states" precondition="" repeatuntil="failure" debug="False"><condition name="confirm not dead" precondition="" repeatuntil="" debug="False" expression="is_dead == false" /><selector name="handle deleted objects" precondition="" repeatuntil="" debug="False"><action name="check if point of of interest has been deleted" precondition="" repeatuntil="" debug="False" classname="PointOfInterestHasBeenDeleted" /><assign name="set it as null" precondition="" repeatuntil="" debug="False" expression="point_of_interest = null" /></selector></sequencer><sequencer name="Change emotional state" precondition="" repeatuntil="failure" debug="False"><condition name="confirm not dead" precondition="" repeatuntil="" debug="False" expression="is_dead == false" /><selector name="choose emotional state" precondition="" repeatuntil="" debug="False"><selector name="change to dying" precondition="" repeatuntil="" debug="False"><condition name="AI has no health" precondition="" repeatuntil="" debug="False" expression="current_health &gt; 0" /><sequencer name="set variables for dying" precondition="" repeatuntil="" debug="False"><assign name="set point of interest as null" precondition="" repeatuntil="" debug="False" expression="point_of_interest = null" /><assign name="set hiding spot as null" precondition="" repeatuntil="" debug="False" expression="hiding_spot = null" /><assign name="set the AI as dying" precondition="" repeatuntil="" debug="False" expression="emotional_state = &quot;dying&quot;" /></sequencer></selector></selector></sequencer><sequencer name="Execute Behavior  based on emotional state" precondition="" repeatuntil="failure" debug="False"><condition name="confirm not_dead" precondition="" repeatuntil="" debug="False" expression="is_dead == false" /><selector name="Choose behavior" precondition="" repeatuntil="" debug="False"><sequencer name="calm behavior" precondition="" repeatuntil="" debug="False"><condition name="AI is calm" precondition="" repeatuntil="" debug="False" expression="emotional_state == &quot;calm&quot;" /><selector name="Try to eat points of interest" precondition="" repeatuntil="" debug="False"><selector name="Search for nearest point of interest" precondition="point_of_interest_found == false " repeatuntil="" debug="False"><sequencer name="Try to detect point of interest" precondition="" repeatuntil="" debug="False"><detect name="detect point of interest" precondition="" repeatuntil="" debug="False" sensor="Visual" aspect="pointOfInterest" variable="point_of_interest" /><assign name="set point of interest as found" precondition="" repeatuntil="" debug="False" expression="point_of_interest_found = true" /><action name="set look direction" precondition="" repeatuntil="" debug="False" classname="SetLookDirection" /></sequencer><action name="Turn to look for point of interest" precondition="current_health &gt; 0" repeatuntil="" debug="False" classname="LookAroundForPointsOfInterest" /></selector><action name="reset point of interest state if it has been deleted" precondition="" repeatuntil="" debug="False" classname="ResetDestroyedPointOfInterest" /><sequencer name="Move To Point of Interest" precondition="" repeatuntil="" debug="False"><move name="move to point of interest" precondition="" repeatuntil="" debug="False" movetarget="point_of_interest" movespeed="-1" animation="" animationlayer="0" animationwrapmode="default" animationbasespeed="1" /><sequencer name="Eat and reset" precondition="" repeatuntil="" debug="False"><action name="destory the point of interest" precondition="" repeatuntil="" debug="False" classname="DestroyObject" /><assign name="set point of interest as null" precondition="" repeatuntil="" debug="False" expression="point_of_interest = null" /><assign name="set point of interest found as fase" precondition="" repeatuntil="" debug="False" expression="point_of_interest_found = false" /></sequencer></sequencer></selector></sequencer><sequencer name="scared behavior" precondition="" repeatuntil="" debug="False"><condition name="AI is scared" precondition="" repeatuntil="" debug="False" expression="emotional_state == &quot;scared&quot;" /><sequencer name="Move to random hiding spot" precondition="" repeatuntil="" debug="False"><action name="select random hiding spot" precondition="" repeatuntil="" debug="False" classname="FindRandomHidingSpot" /><move name="move to hiding spot" precondition="" repeatuntil="" debug="False" movetarget="hiding_spot" movespeed="-1" animation="" animationlayer="0" animationwrapmode="default" animationbasespeed="1" /></sequencer></sequencer><sequencer name="dying behavior" precondition="" repeatuntil="" debug="False"><condition name="AI is dying" precondition="" repeatuntil="" debug="False" expression="emotional_state == &quot;dying&quot;" /><sequencer name="Die" precondition="" repeatuntil="" debug="False"><animate name="play death animation" precondition="" repeatuntil="" debug="False" animation="Die" waitforsec="2" layer="0" wrapmode="default" fadein="0" fadeout="0" /><assign name="set the AI as dead" precondition="" repeatuntil="" debug="False" expression="is_dead = true" /></sequencer></sequencer></selector></sequencer></parallel></sequencer></sequencer></behaviortree>